<!DOCTYPE html>
<html th:replace="~{fragments/layout :: layout(~{::head}, ~{::main})}">

<head th:replace="fragments/head :: head(~{}, 'Vendas &ndash; PWEBII')"></head>

<body>

    <main class="container">
        <table class="table table-striped table-hover border border">
            <thead>
            <tr>
                <th>Id</th>
                <th>Descrição</th>
                <th>Valor</th>
                <th class="text-end">Ações</th>
            </tr>
            </thead>
            <tbody class="table-group-divider">
            <tr th:each="p : ${produtos}">
                <td th:text="${p.id}"></td>
                <td th:text="${p.descricao}"></td>
                <td th:text="${#numbers.formatCurrency(p.valor)}"></td>
                <td class="text-end">
                    <form th:action="@{/vendas/add-item}" th:object="${itemVenda}" method="post">
                        <input type="hidden" th:name="produto.id" th:value="${p.id}">
                        <label for="qtd" class="form-label">
                            Quantidade
                            <br>
                        </label>
                        <div class="row justify-content-end">
                            <div class="col-12 col-md-3 col-lg-2">
                                <input
                                    type="number"
                                    class="form-control w-100"
                                    th:errorclass="is-invalid"
                                    th:field="*{qtd}"
                                    id="qtd"
                                    placeholder="Digite a quantidade"
                                    aria-describedby="validationQuantidade"
                                >
                                <div
                                    th:if="${#fields.hasErrors('qtd')}"
                                    th:errors="*{qtd}"
                                    id="validationQuantidade"
                                    class="invalid-feedback"
                                >
                                    Dado incorreto.
                                </div>
                            </div>
                            <div class="col-12 col-md-6 col-lg-4">
                                <input class="btn btn-primary btn-sm w-100" type="submit" value="Adicionar ao carrinho">
                            </div>
                        </div>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </main>

</body>
</html>
